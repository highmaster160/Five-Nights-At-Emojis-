<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Five Nights at Emojis</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ˜±</text></svg>">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; }
        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(100%); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const FiveNightsAtEmojis = () => {
          const [gameState, setGameState] = useState('menu');
          const [night, setNight] = useState(1);
          const [time, setTime] = useState(0);
          const [power, setPower] = useState(100);
          const [currentView, setCurrentView] = useState('office');
          const [leftDoorClosed, setLeftDoorClosed] = useState(false);
          const [rightDoorClosed, setRightDoorClosed] = useState(false);
          const [leftLightOn, setLeftLightOn] = useState(false);
          const [rightLightOn, setRightLightOn] = useState(false);
          const [cameraUp, setCameraUp] = useState(false);
          const [selectedCamera, setSelectedCamera] = useState('CAM1A');
          const [gameOver, setGameOver] = useState(false);
          const [winner, setWinner] = useState(false);
          const [jumpscare, setJumpscare] = useState(null);
          const [animatronics, setAnimatronics] = useState({
            smiley: { location: 'CAM1A', moveTimer: 0, aggression: 1, doorTimer: 0 },
            laughing: { location: 'CAM1A', moveTimer: 0, aggression: 2, doorTimer: 0 },
            cool: { location: 'CAM1B', moveTimer: 0, aggression: 1, doorTimer: 0 },
            devil: { location: 'CAM7', moveTimer: 0, aggression: 3, doorTimer: 0 }
          });

          const gameLoopRef = useRef(null);
          const powerDrainRef = useRef(null);

          const cameras = {
            'CAM1A': { name: 'Show Stage', emoji: 'ðŸŽ­' },
            'CAM1B': { name: 'Dining Area', emoji: 'ðŸ•' },
            'CAM1C': { name: 'Pirate Cove', emoji: 'ðŸ´â€â˜ ï¸' },
            'CAM2A': { name: 'West Hall', emoji: 'ðŸšª' },
            'CAM2B': { name: 'West Corner', emoji: 'ðŸ”¦' },
            'CAM3': { name: 'Supply', emoji: 'ðŸ“¦' },
            'CAM4A': { name: 'East Hall', emoji: 'ðŸšª' },
            'CAM4B': { name: 'East Corner', emoji: 'ðŸ”¦' },
            'CAM5': { name: 'Backstage', emoji: 'ðŸŽ¬' },
            'CAM6': { name: 'Kitchen', emoji: 'ðŸ³' },
            'CAM7': { name: 'Restrooms', emoji: 'ðŸš»' }
          };

          const Battery = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="2" y="7" width="18" height="10" rx="2"/><path d="M22 11v2"/></svg>;
          const Zap = () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>;
          const Camera = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>;
          const AlertTriangle = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>;

          useEffect(() => {
            if (gameState === 'playing') {
              gameLoopRef.current = setInterval(() => {
                setTime(prev => {
                  if (prev >= 360) {
                    clearInterval(gameLoopRef.current);
                    setWinner(true);
                    setGameState('end');
                    return 360;
                  }
                  return prev + 1;
                });
              }, 1000);

              powerDrainRef.current = setInterval(() => {
                setPower(prev => {
                  let drain = 1;
                  if (leftDoorClosed) drain += 1;
                  if (rightDoorClosed) drain += 1;
                  if (leftLightOn) drain += 0.5;
                  if (rightLightOn) drain += 0.5;
                  if (cameraUp) drain += 0.5;
                  
                  const newPower = prev - (drain * 0.1);
                  if (newPower <= 0) {
                    clearInterval(powerDrainRef.current);
                    clearInterval(gameLoopRef.current);
                    triggerJumpscare('power');
                    return 0;
                  }
                  return newPower;
                });
              }, 1000);

              return () => {
                clearInterval(gameLoopRef.current);
                clearInterval(powerDrainRef.current);
              };
            }
          }, [gameState, leftDoorClosed, rightDoorClosed, leftLightOn, rightLightOn, cameraUp]);

          useEffect(() => {
            if (gameState === 'playing') {
              const aiInterval = setInterval(() => {
                setAnimatronics(prev => {
                  const updated = { ...prev };
                  Object.keys(updated).forEach(key => {
                    const anim = updated[key];
                    anim.moveTimer++;
                    
                    if ((anim.location === 'leftDoor' || anim.location === 'rightDoor') && 
                        ((anim.location === 'leftDoor' && !leftDoorClosed) || 
                         (anim.location === 'rightDoor' && !rightDoorClosed))) {
                      anim.doorTimer++;
                      if (
